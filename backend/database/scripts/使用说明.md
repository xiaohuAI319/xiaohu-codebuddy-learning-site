# æ•°æ®åº“è„šæœ¬ä½¿ç”¨è¯´æ˜

## ğŸ“‹ è„šæœ¬æ¦‚è¿°

æœ¬å¥—æ•°æ®åº“è„šæœ¬ä¸ºå°è™CodeBuddyå­¦ä¹ ç«™æä¾›å®Œæ•´çš„æ•°æ®åº“é‡å»ºå’Œæ•°æ®å¯¼å…¥åŠŸèƒ½ï¼Œæ”¯æŒå¿«é€Ÿæ¢å¤å¼€å‘ç¯å¢ƒå’Œéƒ¨ç½²æµ‹è¯•æ•°æ®ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
backend/database/scripts/
â”œâ”€â”€ 01_create_tables.sql          # æ•°æ®åº“è¡¨ç»“æ„åˆ›å»ºè„šæœ¬
â”œâ”€â”€ 02_membership_tiers_data.sql # ä¼šå‘˜ç­‰çº§æ•°æ®
â”œâ”€â”€ 03_users_data.sql            # ç”¨æˆ·æ•°æ®
â”œâ”€â”€ 04_works_data.sql            # ä½œå“æ•°æ®
â”œâ”€â”€ 05_bootcamps_data.sql        # è®­ç»ƒè¥æ•°æ®
â”œâ”€â”€ 06_coupons_data.sql          # ä¼˜æƒ åˆ¸æ•°æ®
â”œâ”€â”€ 07_serial_codes_data.sql     # åºåˆ—å·æ•°æ®
â”œâ”€â”€ 08_votes_data.sql            # æŠ•ç¥¨æ•°æ®
â”œâ”€â”€ 99_import_all_data.sql       # å®Œæ•´æ•°æ®å¯¼å…¥è„šæœ¬
â”œâ”€â”€ rebuild-database.sh           # Linux/Mac é‡å»ºè„šæœ¬
â”œâ”€â”€ rebuild-database.bat          # Windows é‡å»ºè„šæœ¬
â”œâ”€â”€ README.md                     # è‹±æ–‡è¯´æ˜æ–‡æ¡£
â””â”€â”€ ä½¿ç”¨è¯´æ˜.md                   # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Windowsç”¨æˆ·ï¼ˆæ¨èï¼‰

```cmd
# æ–¹æ³•1ï¼šä½¿ç”¨npmè„šæœ¬ï¼ˆæœ€ç®€å•ï¼‰
cd backend
npm run rebuild-db

# æ–¹æ³•2ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬
cd backend
database\scripts\rebuild-database.bat

# æ–¹æ³•3ï¼šæ‰‹åŠ¨æ‰§è¡Œ
cd backend
del database\xiaohu-codebuddy.db
sqlite3 database\xiaohu-codebuddy.db < database\scripts\01_create_tables.sql
sqlite3 database\xiaohu-codebuddy.db < database\scripts\99_import_all_data.sql
```

### Linux/Macç”¨æˆ·

```bash
# æ–¹æ³•1ï¼šä½¿ç”¨npmè„šæœ¬
cd backend
npm run rebuild-db

# æ–¹æ³•2ï¼šä½¿ç”¨shellè„šæœ¬
cd backend
chmod +x database/scripts/rebuild-database.sh
./database/scripts/rebuild-database.sh

# æ–¹æ³•3ï¼šæ‰‹åŠ¨æ‰§è¡Œ
cd backend
rm database/xiaohu-codebuddy.db
sqlite3 database/xiaohu-codebuddy.db < database/scripts/01_create_tables.sql
sqlite3 database/xiaohu-codebuddy.db < database/scripts/99_import_all_data.sql
```

## ğŸ“Š æµ‹è¯•æ•°æ®è¯´æ˜

### ç”¨æˆ·è´¦æˆ·
| è§’è‰² | ç”¨æˆ·å | å¯†ç  | æƒé™ |
|------|--------|------|------|
| ç®¡ç†å‘˜ | admin@xiaohu.com | admin123456 | å…¨éƒ¨æƒé™ |
| æµ‹è¯•ç”¨æˆ· | testuser@example.com | *[è§æ•°æ®åº“]* | åŸºç¡€å­¦å‘˜ |
| æ™®é€šå­¦å‘˜ | student@example.com | *[è§æ•°æ®åº“]* | åŸºç¡€å­¦å‘˜ |

### ä½œå“æ•°æ®ï¼ˆ5ä¸ªæµ‹è¯•ä½œå“ï¼‰
1. **AIèŠå¤©æœºå™¨äºº** - 40ç¥¨ï¼Œç½®é¡¶ä½œå“
2. **å›¾ç‰‡è¯†åˆ«åº”ç”¨** - 47ç¥¨ï¼ŒAIç›¸å…³
3. **ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ** - 21ç¥¨ï¼Œå›¢é˜Ÿåä½œ
4. **å¤©æ°”åº”ç”¨** - 2ç¥¨ï¼Œç§»åŠ¨ç«¯
5. **ä»£ç ç¼–è¾‘å™¨** - 5ç¥¨ï¼Œå¼€å‘å·¥å…·

### ä¼šå‘˜ç­‰çº§ï¼ˆ5ä¸ªç­‰çº§ï¼‰
- å­¦å‘˜ â†’ ä¼šå‘˜ â†’ é«˜çº§ä¼šå‘˜ â†’ å…±åˆ› â†’ è®²å¸ˆ

### å…¶ä»–æ•°æ®
- è®­ç»ƒè¥ï¼š3ä¸ªï¼ˆAIç¼–ç¨‹ã€Webå…¨æ ˆã€ç§»åŠ¨å¼€å‘ï¼‰
- ä¼˜æƒ åˆ¸ï¼š3ç§ï¼ˆæ¬¢è¿åˆ¸ã€æ˜¥å­£åˆ¸ã€å­¦ç”Ÿåˆ¸ï¼‰
- åºåˆ—å·ï¼š25ä¸ªå‡çº§ç ï¼ˆæ¯ä¸ªç­‰çº§5ä¸ªï¼‰
- æŠ•ç¥¨è®°å½•ï¼š2æ¡æµ‹è¯•è®°å½•

## ğŸ› ï¸ å¯ç”¨å‘½ä»¤

```bash
# é‡å»ºå®Œæ•´æ•°æ®åº“ï¼ˆç»“æ„+æ•°æ®ï¼‰
npm run rebuild-db

# åªå¯¼å…¥æ•°æ®ï¼ˆä¿ç•™è¡¨ç»“æ„ï¼‰
npm run import-data

# å¯¼å‡ºæ•°æ®åº“å¤‡ä»½
npm run export-db

# ä¼ ç»Ÿåˆå§‹åŒ–ï¼ˆä½¿ç”¨TypeScriptè„šæœ¬ï¼‰
npm run init-db

# åˆ›å»ºæµ‹è¯•ä½œå“
npm run create-test-works
```

## ğŸ”§ é«˜çº§ç”¨æ³•

### å¤‡ä»½ç°æœ‰æ•°æ®åº“
```bash
# è‡ªåŠ¨å¤‡ä»½ï¼ˆå¸¦æ—¶é—´æˆ³ï¼‰
npm run export-db

# æ‰‹åŠ¨å¤‡ä»½
cp database/xiaohu-codebuddy.db database/xiaohu-codebuddy.db.backup.$(date +%Y%m%d_%H%M%S)
```

### éªŒè¯æ•°æ®åº“çŠ¶æ€
```bash
# æŸ¥çœ‹è¡¨ç»“æ„
sqlite3 database/xiaohu-codebuddy.db ".schema"

# æŸ¥çœ‹æ•°æ®ç»Ÿè®¡
sqlite3 database/xiaohu-codebuddy.db "SELECT 'users:' || COUNT(*) FROM users UNION SELECT 'works:' || COUNT(*) FROM works UNION SELECT 'votes:' || COUNT(*) FROM votes;"
```

### è‡ªå®šä¹‰æ•°æ®ä¿®æ”¹
ç¼–è¾‘ `99_import_all_data.sql` æ–‡ä»¶ä¸­çš„ç›¸åº”éƒ¨åˆ†ï¼Œç„¶åé‡æ–°å¯¼å…¥ï¼š
```bash
npm run import-data
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸¢å¤±è­¦å‘Š**: æ‰§è¡Œé‡å»ºè„šæœ¬ä¼šæ¸…ç©ºæ‰€æœ‰ç°æœ‰æ•°æ®
2. **å¤‡ä»½å»ºè®®**: é‡å»ºå‰ä¼šè‡ªåŠ¨å¤‡ä»½åŸæ•°æ®åº“æ–‡ä»¶
3. **å¯†ç å®‰å…¨**: æµ‹è¯•ç”¨æˆ·å¯†ç éœ€è¦æ ¹æ®å®é™…bcryptå“ˆå¸Œå€¼è°ƒæ•´
4. **æ–‡ä»¶æƒé™**: ç¡®ä¿å¯¹databaseç›®å½•æœ‰è¯»å†™æƒé™
5. **ç«¯å£å†²çª**: é‡å»ºåéœ€è¦é‡å¯åç«¯æœåŠ¡

## ğŸ› å¸¸è§é—®é¢˜

### Q: é‡å»ºåæ— æ³•ç™»å½•ï¼Ÿ
A: æ£€æŸ¥å¯†ç å“ˆå¸Œå€¼æ˜¯å¦æ­£ç¡®ï¼Œæˆ–ä½¿ç”¨é»˜è®¤ç®¡ç†å‘˜è´¦æˆ· admin@xiaohu.com / admin123456

### Q: æŠ•ç¥¨åŠŸèƒ½ä¸å·¥ä½œï¼Ÿ
A: ç¡®ä¿votesè¡¨æ•°æ®æ­£ç¡®å¯¼å…¥ï¼Œæ£€æŸ¥æ•°æ®åº“å…³è”å…³ç³»

### Q: ä½œå“å›¾ç‰‡æ˜¾ç¤ºé”™è¯¯ï¼Ÿ
A: æ£€æŸ¥uploadsç›®å½•æ˜¯å¦å­˜åœ¨å¯¹åº”å›¾ç‰‡æ–‡ä»¶

### Q: æ•°æ®åº“æ–‡ä»¶è¢«å ç”¨ï¼Ÿ
A: åœæ­¢åç«¯æœåŠ¡åé‡è¯•ï¼Œæˆ–é‡å¯ç”µè„‘

## ğŸ“ˆ æ•°æ®ç»Ÿè®¡

æ‰§è¡Œé‡å»ºåï¼Œæ•°æ®åº“åº”åŒ…å«ï¼š
- ä¼šå‘˜ç­‰çº§: 5æ¡
- ç”¨æˆ·: 3æ¡
- ä½œå“: 5æ¡
- è®­ç»ƒè¥: 3æ¡
- ä¼˜æƒ åˆ¸: 3æ¡
- åºåˆ—å·: 25æ¡
- æŠ•ç¥¨è®°å½•: 2æ¡

---

**åˆ›å»ºæ—¶é—´**: 2025-09-27
**ç»´æŠ¤è€…**: Claude AI Assistant
**é€‚ç”¨ç‰ˆæœ¬**: å°è™CodeBuddyå­¦ä¹ ç«™ v1.0