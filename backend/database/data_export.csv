PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE `Categories` (`id` VARCHAR(50) NOT NULL PRIMARY KEY, `name` VARCHAR(50) NOT NULL, `description` VARCHAR(200), `order` INTEGER NOT NULL DEFAULT 0, `isActive` TINYINT(1) NOT NULL DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
CREATE TABLE `membership_tiers_backup` (`id` INTEGER PRIMARY KEY, `name` VARCHAR(50) NOT NULL UNIQUE, `level` INTEGER NOT NULL, `priceRangeMin` DECIMAL(10,2) NOT NULL, `priceRangeMax` DECIMAL(10,2) NOT NULL, `color` VARCHAR(20) NOT NULL, `icon` VARCHAR(10) NOT NULL, `description` TEXT NOT NULL, `benefits` TEXT NOT NULL, `permissions` TEXT NOT NULL, `isActive` TINYINT(1) NOT NULL DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO membership_tiers_backup VALUES(1,'å­¦å‘˜',1,9.90000000000000035,99,'#10B981','ğŸ“','å…¥é—¨çº§ä¼šå‘˜ï¼Œäº«å—åŸºç¡€å­¦ä¹ æƒç›Š','["æŸ¥çœ‹åŸºç¡€å†…å®¹","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥3ä¸ªï¼‰","å‚ä¸æŠ•ç¥¨","åŸºç¡€æŠ€æœ¯æ”¯æŒ"]','{"canViewBasic":true,"canViewAdvanced":false,"canViewPremium":false,"canViewSource":false,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":3}',1,'2025-09-25 07:44:58.788 +00:00','2025-09-25 07:44:58.789 +00:00');
INSERT INTO membership_tiers_backup VALUES(2,'ä¼šå‘˜',2,100,999,'#3B82F6','â­','æ ‡å‡†ä¼šå‘˜ï¼Œäº«å—è¿›é˜¶å­¦ä¹ æƒç›Š','["å­¦å‘˜æ‰€æœ‰æƒç›Š","æŸ¥çœ‹é«˜çº§å†…å®¹","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥5ä¸ªï¼‰","ä¼˜å…ˆå±•ç¤º","ä¸“å±ä¼šå‘˜æ ‡è¯†"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":false,"canViewSource":false,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":5}',1,'2025-09-25 07:44:58.801 +00:00','2025-09-25 07:44:58.801 +00:00');
INSERT INTO membership_tiers_backup VALUES(3,'é«˜çº§ä¼šå‘˜',3,1000,4999,'#8B5CF6','ğŸ’','é«˜çº§ä¼šå‘˜ï¼Œäº«å—ä¸“ä¸šå­¦ä¹ æƒç›Š','["ä¼šå‘˜æ‰€æœ‰æƒç›Š","æŸ¥çœ‹é«˜ç«¯å†…å®¹","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥10ä¸ªï¼‰","ä¸“å±é«˜çº§æ ‡è¯†","ä¼˜å…ˆæŠ€æœ¯æ”¯æŒ"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":true,"canViewSource":false,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":10}',1,'2025-09-25 07:44:58.809 +00:00','2025-09-25 07:44:58.809 +00:00');
INSERT INTO membership_tiers_backup VALUES(4,'å…±åˆ›',4,5000,14999,'#F59E0B','ğŸš€','å…±åˆ›ä¼™ä¼´ï¼Œå‚ä¸å†…å®¹åˆ›ä½œå’Œç¤¾åŒºå»ºè®¾','["é«˜çº§ä¼šå‘˜æ‰€æœ‰æƒç›Š","æŸ¥çœ‹æºç ","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥20ä¸ªï¼‰","å‚ä¸å†…å®¹åˆ›ä½œ","å…±åˆ›ä¼™ä¼´æ ‡è¯†","ä¸“å±äº¤æµç¾¤"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":true,"canViewSource":true,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":20}',1,'2025-09-25 07:44:58.820 +00:00','2025-09-25 07:44:58.820 +00:00');
INSERT INTO membership_tiers_backup VALUES(5,'è®²å¸ˆ',5,15000,99999,'#EF4444','ğŸ‘‘','è®²å¸ˆçº§åˆ«ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™å’Œè£èª‰','["å…±åˆ›æ‰€æœ‰æƒç›Š","æ— é™åˆ¶ä¸Šä¼ ä½œå“","å‘å¸ƒè¯¾ç¨‹","ç®¡ç†å­¦å‘˜","è®²å¸ˆä¸“å±æ ‡è¯†","æ”¶ç›Šåˆ†æˆ"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":true,"canViewSource":true,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":-1}',1,'2025-09-25 07:44:58.830 +00:00','2025-09-25 07:44:58.831 +00:00');
CREATE TABLE `membership_tiers` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(50) NOT NULL UNIQUE, `level` INTEGER NOT NULL UNIQUE, `priceRangeMin` DECIMAL(10,2) NOT NULL, `priceRangeMax` DECIMAL(10,2) NOT NULL, `color` VARCHAR(20) NOT NULL, `icon` VARCHAR(10) NOT NULL, `description` TEXT NOT NULL, `benefits` TEXT NOT NULL, `permissions` TEXT NOT NULL, `isActive` TINYINT(1) NOT NULL DEFAULT 1, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO membership_tiers VALUES(1,'å­¦å‘˜',1,9.90000000000000035,99,'#10B981','ğŸ“','å…¥é—¨çº§ä¼šå‘˜ï¼Œäº«å—åŸºç¡€å­¦ä¹ æƒç›Š','["æŸ¥çœ‹åŸºç¡€å†…å®¹","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥3ä¸ªï¼‰","å‚ä¸æŠ•ç¥¨","åŸºç¡€æŠ€æœ¯æ”¯æŒ"]','{"canViewBasic":true,"canViewAdvanced":false,"canViewPremium":false,"canViewSource":false,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":3}',1,'2025-09-27 08:36:37.334 +00:00','2025-09-27 08:36:37.335 +00:00');
INSERT INTO membership_tiers VALUES(2,'ä¼šå‘˜',2,100,999,'#3B82F6','â­','æ ‡å‡†ä¼šå‘˜ï¼Œäº«å—è¿›é˜¶å­¦ä¹ æƒç›Š','["å­¦å‘˜æ‰€æœ‰æƒç›Š","æŸ¥çœ‹é«˜çº§å†…å®¹","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥5ä¸ªï¼‰","ä¼˜å…ˆå±•ç¤º","ä¸“å±ä¼šå‘˜æ ‡è¯†"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":false,"canViewSource":false,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":5}',1,'2025-09-27 08:36:37.348 +00:00','2025-09-27 08:36:37.348 +00:00');
INSERT INTO membership_tiers VALUES(3,'é«˜çº§ä¼šå‘˜',3,1000,4999,'#8B5CF6','ğŸ’','é«˜çº§ä¼šå‘˜ï¼Œäº«å—ä¸“ä¸šå­¦ä¹ æƒç›Š','["ä¼šå‘˜æ‰€æœ‰æƒç›Š","æŸ¥çœ‹é«˜ç«¯å†…å®¹","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥10ä¸ªï¼‰","ä¸“å±é«˜çº§æ ‡è¯†","ä¼˜å…ˆæŠ€æœ¯æ”¯æŒ"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":true,"canViewSource":false,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":10}',1,'2025-09-27 08:36:37.357 +00:00','2025-09-27 08:36:37.357 +00:00');
INSERT INTO membership_tiers VALUES(4,'å…±åˆ›',4,5000,14999,'#F59E0B','ğŸš€','å…±åˆ›ä¼™ä¼´ï¼Œå‚ä¸å†…å®¹åˆ›ä½œå’Œç¤¾åŒºå»ºè®¾','["é«˜çº§ä¼šå‘˜æ‰€æœ‰æƒç›Š","æŸ¥çœ‹æºç ","ä¸Šä¼ ä½œå“ï¼ˆæ¯æ—¥20ä¸ªï¼‰","å‚ä¸å†…å®¹åˆ›ä½œ","å…±åˆ›ä¼™ä¼´æ ‡è¯†","ä¸“å±äº¤æµç¾¤"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":true,"canViewSource":true,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":20}',1,'2025-09-27 08:36:37.366 +00:00','2025-09-27 08:36:37.366 +00:00');
INSERT INTO membership_tiers VALUES(5,'è®²å¸ˆ',5,15000,99999,'#EF4444','ğŸ‘‘','è®²å¸ˆçº§åˆ«ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™å’Œè£èª‰','["å…±åˆ›æ‰€æœ‰æƒç›Š","æ— é™åˆ¶ä¸Šä¼ ä½œå“","å‘å¸ƒè¯¾ç¨‹","ç®¡ç†å­¦å‘˜","è®²å¸ˆä¸“å±æ ‡è¯†","æ”¶ç›Šåˆ†æˆ"]','{"canViewBasic":true,"canViewAdvanced":true,"canViewPremium":true,"canViewSource":true,"canUploadWorks":true,"canVote":true,"maxUploadsPerDay":-1}',1,'2025-09-27 08:36:37.374 +00:00','2025-09-27 08:36:37.374 +00:00');
CREATE TABLE `users` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `username` VARCHAR(50) NOT NULL UNIQUE, `email` VARCHAR(100) NOT NULL UNIQUE, `password` VARCHAR(255) NOT NULL, `nickname` VARCHAR(50) NOT NULL, `role` TEXT NOT NULL DEFAULT 'student', `avatar` VARCHAR(255), `bio` TEXT, `joinDate` DATETIME NOT NULL, `isActive` TINYINT(1) NOT NULL DEFAULT 1, `membershipTierId` INTEGER REFERENCES `membership_tiers` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `currentLevel` VARCHAR(50) NOT NULL DEFAULT 'å­¦å‘˜', `totalSpent` DECIMAL(10,2) NOT NULL DEFAULT 0, `totalPaid` DECIMAL(10,2) NOT NULL DEFAULT 0, `membershipExpiry` DATETIME, `availableCoupons` TEXT NOT NULL DEFAULT '[]', `usedCoupons` TEXT NOT NULL DEFAULT '[]', `paymentHistory` TEXT NOT NULL DEFAULT '[]', `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO users VALUES(1,'å°è™admin','admin@xiaohu.com','$2a$12$3x74P/8xgQlQV69SOJkO1uZuLfLsUre/dmBwv/65o5fHckDAYMvTK','å°è™','admin',NULL,'å°è™CodeBuddyå­¦ä¹ ç«™åˆ›å§‹äººï¼Œè‡´åŠ›äºAIç¼–ç¨‹æ•™è‚²','2025-09-27 08:36:37.385 +00:00',1,5,'è®²å¸ˆ',0,0,'2026-09-27 08:36:37.385 +00:00','[]','[]','[]','2025-09-27 08:36:37.385 +00:00','2025-09-27 08:36:37.386 +00:00');
INSERT INTO users VALUES(2,'982620','982620@qq.com','$2a$12$5/5i2ghjj2nbdPLZOPH71evJPeD8tXX9x6Njl/WC9z8.Z.tozekn.','å°è™AI','student',NULL,NULL,'2025-09-27 08:53:16.635 +00:00',1,NULL,'ç”¨æˆ·',0,0,NULL,'[]','[]','[]','2025-09-27 08:53:16.635 +00:00','2025-09-27 08:53:16.637 +00:00');
INSERT INTO users VALUES(3,'testuser','test@example.com','$2a$12$5ypjzTB35.E.qBJ2dwViXeYD30g2lZ7bjahfoy602AqQ5/favI5Xq','ï¿½ï¿½ï¿½ï¿½ï¿½Ã»ï¿½','student',NULL,NULL,'2025-09-27 08:59:47.849 +00:00',1,NULL,'ç”¨æˆ·',0,0,NULL,'[]','[]','[]','2025-09-27 08:59:47.849 +00:00','2025-09-27 08:59:47.849 +00:00');
CREATE TABLE `Works` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `title` VARCHAR(100) NOT NULL, `description` TEXT NOT NULL, `coverImage` VARCHAR(500) NOT NULL, `slug` VARCHAR(100) UNIQUE, `htmlFile` VARCHAR(500), `link` VARCHAR(500), `category` TEXT NOT NULL DEFAULT 'other', `tags` VARCHAR(500), `repositoryUrl` VARCHAR(500), `prompt` TEXT NOT NULL, `bootcamp` VARCHAR(100), `author` INTEGER NOT NULL REFERENCES `Users` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, `votes` INTEGER NOT NULL DEFAULT 0, `isPinned` TINYINT(1) NOT NULL DEFAULT 0, `visibility` TEXT NOT NULL DEFAULT 'public', `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO Works VALUES(1,'AIèŠå¤©æœºå™¨äºº','åŸºäºGPTçš„æ™ºèƒ½èŠå¤©æœºå™¨äººï¼Œæ”¯æŒå¤šè½®å¯¹è¯å’Œä¸Šä¸‹æ–‡ç†è§£ã€‚ä½¿ç”¨React + Node.jsæ„å»ºï¼Œå…·æœ‰æµç•…çš„ç”¨æˆ·ç•Œé¢å’Œå¼ºå¤§çš„åç«¯æ”¯æŒã€‚','/uploads/default-cover-4.jpg','4613d5055d6f',NULL,'https://example.com/ai-chatbot-demo','web','AI,React,Node.js,èŠå¤©æœºå™¨äºº','https://github.com/example/ai-chatbot','è¯·è®¾è®¡ä¸€ä¸ªç°ä»£åŒ–çš„AIèŠå¤©æœºå™¨äººç•Œé¢ï¼Œéœ€è¦æ”¯æŒï¼š1) å¤šè½®å¯¹è¯æ˜¾ç¤º 2) è¾“å…¥æ¡†å¸¦æœ‰å‘é€æŒ‰é’® 3) ä¾§è¾¹æ æ˜¾ç¤ºå¯¹è¯å†å² 4) å“åº”å¼è®¾è®¡ 5) æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢',NULL,1,40,0,'public','2025-09-27 08:44:50.478 +00:00','2025-09-27 08:59:56.425 +00:00');
INSERT INTO Works VALUES(2,'å›¾ç‰‡è¯†åˆ«åº”ç”¨','ä½¿ç”¨TensorFlow.jsæ„å»ºçš„å›¾åƒè¯†åˆ«Webåº”ç”¨ï¼Œå¯ä»¥å®æ—¶è¯†åˆ«ç‰©ä½“ã€äººè„¸å’Œåœºæ™¯ã€‚æ”¯æŒå›¾ç‰‡ä¸Šä¼ å’Œæ‘„åƒå¤´æ‹ç…§åŠŸèƒ½ã€‚','/uploads/default-cover-5.jpg','f4f36ca0e27e',NULL,'https://example.com/image-recognition-demo','web','AI,TensorFlow.js,å›¾åƒè¯†åˆ«,JavaScript','https://github.com/example/image-recognition','åˆ›å»ºä¸€ä¸ªå›¾åƒè¯†åˆ«Webåº”ç”¨ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š1) å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ 2) æ‹–æ‹½ä¸Šä¼ æ”¯æŒ 3) æ‘„åƒå¤´æ‹ç…§åŠŸèƒ½ 4) è¯†åˆ«ç»“æœæ˜¾ç¤º 5) ç½®ä¿¡åº¦è¯„åˆ†æ˜¾ç¤º',NULL,1,47,0,'public','2025-09-27 08:44:50.496 +00:00','2025-09-27 08:44:50.496 +00:00');
INSERT INTO Works VALUES(3,'ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ','åŠŸèƒ½å®Œæ•´çš„ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå›¢é˜Ÿåä½œã€ä»»åŠ¡åˆ†é…ã€è¿›åº¦è·Ÿè¸ªå’Œæ–‡ä»¶å…±äº«ã€‚ä½¿ç”¨Vue.jså’ŒExpress.jså¼€å‘ã€‚','/uploads/default-cover-1.jpg','468290fe7832',NULL,'https://example.com/task-manager-demo','web','Vue.js,ä»»åŠ¡ç®¡ç†,å›¢é˜Ÿåä½œ,Express.js','https://github.com/example/task-manager','è®¾è®¡ä¸€ä¸ªä»»åŠ¡ç®¡ç†ç³»ç»Ÿç•Œé¢ï¼ŒåŒ…å«ï¼š1) çœ‹æ¿è§†å›¾ 2) åˆ—è¡¨è§†å›¾ 3) ä»»åŠ¡è¯¦æƒ…å¼¹çª— 4) æˆå‘˜åˆ†é…åŠŸèƒ½ 5) è¿›åº¦æ¡æ˜¾ç¤º 6) æˆªæ­¢æ—¥æœŸç®¡ç†',NULL,1,21,0,'public','2025-09-27 08:44:50.506 +00:00','2025-09-27 08:44:50.506 +00:00');
INSERT INTO Works VALUES(4,'å¤©æ°”åº”ç”¨','ç¾è§‚çš„å¤©æ°”æŸ¥è¯¢åº”ç”¨ï¼Œæ”¯æŒå¤šåŸå¸‚ç®¡ç†ã€å¤©æ°”é¢„æŠ¥å’Œå¤©æ°”å›¾è¡¨å±•ç¤ºã€‚ä½¿ç”¨React Nativeå¼€å‘ï¼Œæ”¯æŒiOSå’ŒAndroidã€‚','/uploads/default-cover-4.jpg','7b45e46fc696',NULL,'https://example.com/weather-app-demo','mobile','React Native,å¤©æ°”,ç§»åŠ¨åº”ç”¨,APIé›†æˆ','https://github.com/example/weather-app','å¼€å‘ä¸€ä¸ªå¤©æ°”åº”ç”¨ç•Œé¢ï¼Œè¦æ±‚ï¼š1) å½“å‰å¤©æ°”æ˜¾ç¤º 2) 7å¤©é¢„æŠ¥ 3) å°æ—¶çº§é¢„æŠ¥ 4) å¤šåŸå¸‚ç®¡ç† 5) å¤©æ°”å›¾è¡¨ 6) èƒŒæ™¯æ ¹æ®å¤©æ°”å˜åŒ–',NULL,1,2,0,'public','2025-09-27 08:44:50.522 +00:00','2025-09-27 08:53:28.945 +00:00');
INSERT INTO Works VALUES(5,'ä»£ç ç¼–è¾‘å™¨','åŸºäºMonaco Editorçš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒè¯­æ³•é«˜äº®ã€ä»£ç è¡¥å…¨å’Œå®æ—¶é¢„è§ˆåŠŸèƒ½ã€‚','/uploads/default-cover-2.jpg','f886b8ce2768',NULL,'https://example.com/code-editor-demo','web','Monaco Editor,ä»£ç ç¼–è¾‘,è¯­æ³•é«˜äº®,å®æ—¶é¢„è§ˆ','https://github.com/example/code-editor','åˆ›å»ºä¸€ä¸ªåœ¨çº¿ä»£ç ç¼–è¾‘å™¨ï¼Œéœ€è¦ï¼š1) ä»£ç ç¼–è¾‘åŒºåŸŸ 2) å®æ—¶é¢„è§ˆåŒºåŸŸ 3) æ–‡ä»¶æ ‘ç»“æ„ 4) è¯­æ³•é«˜äº® 5) ä»£ç è¡¥å…¨ 6) ä¸»é¢˜åˆ‡æ¢',NULL,1,5,0,'public','2025-09-27 08:44:50.533 +00:00','2025-09-27 08:44:50.533 +00:00');
CREATE TABLE `bootcamps` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(100) NOT NULL UNIQUE, `description` TEXT NOT NULL, `startDate` DATETIME NOT NULL, `endDate` DATETIME NOT NULL, `isActive` TINYINT(1) NOT NULL DEFAULT 1, `instructorIds` TEXT NOT NULL DEFAULT '[]', `studentIds` TEXT NOT NULL DEFAULT '[]', `maxStudents` INTEGER NOT NULL DEFAULT 50, `tags` TEXT NOT NULL DEFAULT '[]', `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO bootcamps VALUES(1,'AIç¼–ç¨‹è®­ç»ƒè¥ç¬¬ä¸€æœŸ','é¦–æœŸAIç¼–ç¨‹è®­ç»ƒè¥ï¼Œå­¦ä¹ ä½¿ç”¨AIå·¥å…·è¿›è¡Œé«˜æ•ˆç¼–ç¨‹','2024-01-01 00:00:00.000 +00:00','2024-03-31 00:00:00.000 +00:00',1,'[]','[]',50,'["AIç¼–ç¨‹","åŸºç¡€å…¥é—¨","å®æˆ˜é¡¹ç›®"]','2025-09-27 08:36:37.664 +00:00','2025-09-27 08:36:37.665 +00:00');
INSERT INTO bootcamps VALUES(2,'AIç¼–ç¨‹è®­ç»ƒè¥ç¬¬äºŒæœŸ','ç¬¬äºŒæœŸAIç¼–ç¨‹è®­ç»ƒè¥ï¼Œè¿›é˜¶AIç¼–ç¨‹æŠ€å·§å’Œé¡¹ç›®å®æˆ˜','2024-04-01 00:00:00.000 +00:00','2024-06-30 00:00:00.000 +00:00',1,'[]','[]',100,'["AIç¼–ç¨‹","è¿›é˜¶æå‡","å›¢é˜Ÿåä½œ"]','2025-09-27 08:36:37.673 +00:00','2025-09-27 08:36:37.673 +00:00');
INSERT INTO bootcamps VALUES(3,'AIç¼–ç¨‹å‡ºæµ·è®­ç»ƒè¥ç¬¬ä¸€æœŸ','ä¸“æ³¨äºAIç¼–ç¨‹å‡ºæµ·é¡¹ç›®ï¼Œå­¦ä¹ å›½é™…åŒ–å¼€å‘å’Œéƒ¨ç½²','2024-07-01 00:00:00.000 +00:00','2024-09-30 00:00:00.000 +00:00',1,'[]','[]',30,'["AIç¼–ç¨‹","å‡ºæµ·é¡¹ç›®","å›½é™…åŒ–"]','2025-09-27 08:36:37.681 +00:00','2025-09-27 08:36:37.681 +00:00');
CREATE TABLE `coupons` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(50) NOT NULL UNIQUE, `name` VARCHAR(100) NOT NULL, `description` TEXT NOT NULL, `discountType` TEXT NOT NULL, `discountValue` DECIMAL(10,2) NOT NULL, `minPurchaseAmount` DECIMAL(10,2) NOT NULL DEFAULT 0, `maxDiscountAmount` DECIMAL(10,2), `usageLimit` INTEGER NOT NULL, `usedCount` INTEGER NOT NULL DEFAULT 0, `validFrom` DATETIME NOT NULL, `validTo` DATETIME NOT NULL, `isActive` TINYINT(1) NOT NULL DEFAULT 1, `applicableTierIds` TEXT NOT NULL DEFAULT '[]', `createdById` INTEGER NOT NULL REFERENCES `users` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO coupons VALUES(1,'WELCOME10','æ–°ç”¨æˆ·æ¬¢è¿åˆ¸','æ–°ç”¨æˆ·ä¸“äº«10%æŠ˜æ‰£','percentage',10,50,100,100,0,'2025-09-27 08:36:37.690 +00:00','2025-10-27 08:36:37.690 +00:00',1,'[1,2,3,4,5]',1,'2025-09-27 08:36:37.692 +00:00','2025-09-27 08:36:37.692 +00:00');
INSERT INTO coupons VALUES(2,'STUDENT50','å­¦ç”Ÿä¸“äº«åˆ¸','å­¦ç”Ÿç”¨æˆ·ä¸“äº«50å…ƒå‡å…','fixed',50,200,NULL,50,0,'2025-09-27 08:36:37.691 +00:00','2025-11-26 08:36:37.691 +00:00',1,'[1,2]',1,'2025-09-27 08:36:37.701 +00:00','2025-09-27 08:36:37.701 +00:00');
INSERT INTO coupons VALUES(3,'VIP20','VIPä¸“äº«åˆ¸','VIPç”¨æˆ·ä¸“äº«20%æŠ˜æ‰£','percentage',20,1000,500,20,0,'2025-09-27 08:36:37.691 +00:00','2025-12-26 08:36:37.691 +00:00',1,'[3,4,5]',1,'2025-09-27 08:36:37.713 +00:00','2025-09-27 08:36:37.713 +00:00');
CREATE TABLE `serial_codes` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(100) NOT NULL UNIQUE, `membershipTierId` INTEGER NOT NULL REFERENCES `membership_tiers` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, `isUsed` TINYINT(1) NOT NULL DEFAULT 0, `usedById` INTEGER REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `usedAt` DATETIME, `validFrom` DATETIME NOT NULL, `validTo` DATETIME NOT NULL, `batchId` VARCHAR(100) NOT NULL, `createdById` INTEGER NOT NULL REFERENCES `users` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO serial_codes VALUES(1,'å­¦å‘˜-1758962197731-001',1,0,NULL,NULL,'2025-09-27 08:36:37.733 +00:00','2026-09-27 08:36:37.733 +00:00','INIT-å­¦å‘˜-2025-09-27',1,'2025-09-27 08:36:37.735 +00:00','2025-09-27 08:36:37.735 +00:00');
INSERT INTO serial_codes VALUES(2,'å­¦å‘˜-1758962197744-002',1,0,NULL,NULL,'2025-09-27 08:36:37.746 +00:00','2026-09-27 08:36:37.746 +00:00','INIT-å­¦å‘˜-2025-09-27',1,'2025-09-27 08:36:37.746 +00:00','2025-09-27 08:36:37.746 +00:00');
INSERT INTO serial_codes VALUES(3,'å­¦å‘˜-1758962197752-003',1,0,NULL,NULL,'2025-09-27 08:36:37.754 +00:00','2026-09-27 08:36:37.754 +00:00','INIT-å­¦å‘˜-2025-09-27',1,'2025-09-27 08:36:37.754 +00:00','2025-09-27 08:36:37.754 +00:00');
INSERT INTO serial_codes VALUES(4,'å­¦å‘˜-1758962197761-004',1,0,NULL,NULL,'2025-09-27 08:36:37.762 +00:00','2026-09-27 08:36:37.762 +00:00','INIT-å­¦å‘˜-2025-09-27',1,'2025-09-27 08:36:37.762 +00:00','2025-09-27 08:36:37.762 +00:00');
INSERT INTO serial_codes VALUES(5,'å­¦å‘˜-1758962197769-005',1,0,NULL,NULL,'2025-09-27 08:36:37.770 +00:00','2026-09-27 08:36:37.770 +00:00','INIT-å­¦å‘˜-2025-09-27',1,'2025-09-27 08:36:37.770 +00:00','2025-09-27 08:36:37.770 +00:00');
INSERT INTO serial_codes VALUES(6,'ä¼šå‘˜-1758962197780-001',2,0,NULL,NULL,'2025-09-27 08:36:37.781 +00:00','2026-09-27 08:36:37.781 +00:00','INIT-ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.781 +00:00','2025-09-27 08:36:37.781 +00:00');
INSERT INTO serial_codes VALUES(7,'ä¼šå‘˜-1758962197787-002',2,0,NULL,NULL,'2025-09-27 08:36:37.789 +00:00','2026-09-27 08:36:37.789 +00:00','INIT-ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.789 +00:00','2025-09-27 08:36:37.789 +00:00');
INSERT INTO serial_codes VALUES(8,'ä¼šå‘˜-1758962197795-003',2,0,NULL,NULL,'2025-09-27 08:36:37.797 +00:00','2026-09-27 08:36:37.797 +00:00','INIT-ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.797 +00:00','2025-09-27 08:36:37.797 +00:00');
INSERT INTO serial_codes VALUES(9,'ä¼šå‘˜-1758962197804-004',2,0,NULL,NULL,'2025-09-27 08:36:37.805 +00:00','2026-09-27 08:36:37.805 +00:00','INIT-ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.805 +00:00','2025-09-27 08:36:37.805 +00:00');
INSERT INTO serial_codes VALUES(10,'ä¼šå‘˜-1758962197812-005',2,0,NULL,NULL,'2025-09-27 08:36:37.814 +00:00','2026-09-27 08:36:37.814 +00:00','INIT-ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.814 +00:00','2025-09-27 08:36:37.814 +00:00');
INSERT INTO serial_codes VALUES(11,'é«˜çº§ä¼šå‘˜-1758962197820-001',3,0,NULL,NULL,'2025-09-27 08:36:37.822 +00:00','2026-09-27 08:36:37.822 +00:00','INIT-é«˜çº§ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.822 +00:00','2025-09-27 08:36:37.822 +00:00');
INSERT INTO serial_codes VALUES(12,'é«˜çº§ä¼šå‘˜-1758962197829-002',3,0,NULL,NULL,'2025-09-27 08:36:37.830 +00:00','2026-09-27 08:36:37.830 +00:00','INIT-é«˜çº§ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.830 +00:00','2025-09-27 08:36:37.830 +00:00');
INSERT INTO serial_codes VALUES(13,'é«˜çº§ä¼šå‘˜-1758962197836-003',3,0,NULL,NULL,'2025-09-27 08:36:37.838 +00:00','2026-09-27 08:36:37.838 +00:00','INIT-é«˜çº§ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.838 +00:00','2025-09-27 08:36:37.838 +00:00');
INSERT INTO serial_codes VALUES(14,'é«˜çº§ä¼šå‘˜-1758962197845-004',3,0,NULL,NULL,'2025-09-27 08:36:37.846 +00:00','2026-09-27 08:36:37.846 +00:00','INIT-é«˜çº§ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.847 +00:00','2025-09-27 08:36:37.847 +00:00');
INSERT INTO serial_codes VALUES(15,'é«˜çº§ä¼šå‘˜-1758962197853-005',3,0,NULL,NULL,'2025-09-27 08:36:37.854 +00:00','2026-09-27 08:36:37.854 +00:00','INIT-é«˜çº§ä¼šå‘˜-2025-09-27',1,'2025-09-27 08:36:37.854 +00:00','2025-09-27 08:36:37.854 +00:00');
INSERT INTO serial_codes VALUES(16,'å…±åˆ›-1758962197862-001',4,0,NULL,NULL,'2025-09-27 08:36:37.863 +00:00','2026-09-27 08:36:37.863 +00:00','INIT-å…±åˆ›-2025-09-27',1,'2025-09-27 08:36:37.863 +00:00','2025-09-27 08:36:37.863 +00:00');
INSERT INTO serial_codes VALUES(17,'å…±åˆ›-1758962197870-002',4,0,NULL,NULL,'2025-09-27 08:36:37.872 +00:00','2026-09-27 08:36:37.872 +00:00','INIT-å…±åˆ›-2025-09-27',1,'2025-09-27 08:36:37.872 +00:00','2025-09-27 08:36:37.872 +00:00');
INSERT INTO serial_codes VALUES(18,'å…±åˆ›-1758962197879-003',4,0,NULL,NULL,'2025-09-27 08:36:37.880 +00:00','2026-09-27 08:36:37.880 +00:00','INIT-å…±åˆ›-2025-09-27',1,'2025-09-27 08:36:37.880 +00:00','2025-09-27 08:36:37.880 +00:00');
INSERT INTO serial_codes VALUES(19,'å…±åˆ›-1758962197887-004',4,0,NULL,NULL,'2025-09-27 08:36:37.889 +00:00','2026-09-27 08:36:37.889 +00:00','INIT-å…±åˆ›-2025-09-27',1,'2025-09-27 08:36:37.889 +00:00','2025-09-27 08:36:37.889 +00:00');
INSERT INTO serial_codes VALUES(20,'å…±åˆ›-1758962197896-005',4,0,NULL,NULL,'2025-09-27 08:36:37.897 +00:00','2026-09-27 08:36:37.897 +00:00','INIT-å…±åˆ›-2025-09-27',1,'2025-09-27 08:36:37.897 +00:00','2025-09-27 08:36:37.897 +00:00');
INSERT INTO serial_codes VALUES(21,'è®²å¸ˆ-1758962197903-001',5,0,NULL,NULL,'2025-09-27 08:36:37.905 +00:00','2026-09-27 08:36:37.905 +00:00','INIT-è®²å¸ˆ-2025-09-27',1,'2025-09-27 08:36:37.905 +00:00','2025-09-27 08:36:37.905 +00:00');
INSERT INTO serial_codes VALUES(22,'è®²å¸ˆ-1758962197911-002',5,0,NULL,NULL,'2025-09-27 08:36:37.912 +00:00','2026-09-27 08:36:37.912 +00:00','INIT-è®²å¸ˆ-2025-09-27',1,'2025-09-27 08:36:37.913 +00:00','2025-09-27 08:36:37.913 +00:00');
INSERT INTO serial_codes VALUES(23,'è®²å¸ˆ-1758962197920-003',5,0,NULL,NULL,'2025-09-27 08:36:37.921 +00:00','2026-09-27 08:36:37.921 +00:00','INIT-è®²å¸ˆ-2025-09-27',1,'2025-09-27 08:36:37.921 +00:00','2025-09-27 08:36:37.921 +00:00');
INSERT INTO serial_codes VALUES(24,'è®²å¸ˆ-1758962197928-004',5,0,NULL,NULL,'2025-09-27 08:36:37.930 +00:00','2026-09-27 08:36:37.930 +00:00','INIT-è®²å¸ˆ-2025-09-27',1,'2025-09-27 08:36:37.930 +00:00','2025-09-27 08:36:37.930 +00:00');
INSERT INTO serial_codes VALUES(25,'è®²å¸ˆ-1758962197937-005',5,0,NULL,NULL,'2025-09-27 08:36:37.939 +00:00','2026-09-27 08:36:37.939 +00:00','INIT-è®²å¸ˆ-2025-09-27',1,'2025-09-27 08:36:37.939 +00:00','2025-09-27 08:36:37.939 +00:00');
CREATE TABLE `operation_logs` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `userId` INTEGER REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `operatorId` INTEGER REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `operationType` VARCHAR(50) NOT NULL, `operationDetail` TEXT NOT NULL, `targetUserId` INTEGER REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `oldValue` TEXT, `newValue` TEXT, `ipAddress` VARCHAR(45), `userAgent` TEXT, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
CREATE TABLE `membership_upgrades` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `userId` INTEGER NOT NULL REFERENCES `users` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, `fromLevel` VARCHAR(50) NOT NULL, `toLevel` VARCHAR(50) NOT NULL, `upgradeType` TEXT NOT NULL, `operatorId` INTEGER REFERENCES `users` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `serialCodeId` INTEGER REFERENCES `serial_codes` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, `reason` TEXT, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
CREATE TABLE `votes` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `userId` INTEGER NOT NULL REFERENCES `users` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, `workId` INTEGER NOT NULL REFERENCES `works` (`id`) ON DELETE NO ACTION ON UPDATE CASCADE, `createdAt` DATETIME NOT NULL, `updatedAt` DATETIME NOT NULL);
INSERT INTO votes VALUES(1,2,4,'2025-09-27 08:53:28.935 +00:00','2025-09-27 08:53:28.936 +00:00');
INSERT INTO votes VALUES(2,3,1,'2025-09-27 08:59:56.415 +00:00','2025-09-27 08:59:56.415 +00:00');
INSERT INTO sqlite_sequence VALUES('membership_tiers',5);
INSERT INTO sqlite_sequence VALUES('users',3);
INSERT INTO sqlite_sequence VALUES('bootcamps',3);
INSERT INTO sqlite_sequence VALUES('coupons',3);
INSERT INTO sqlite_sequence VALUES('serial_codes',25);
INSERT INTO sqlite_sequence VALUES('Works',5);
INSERT INTO sqlite_sequence VALUES('votes',2);
CREATE INDEX `categories_order` ON `Categories` (`order`);
CREATE INDEX `categories_is_active` ON `Categories` (`isActive`);
CREATE INDEX `categories_created_at` ON `Categories` (`createdAt`);
CREATE INDEX `membership_tiers_level` ON `membership_tiers` (`level`);
CREATE INDEX `membership_tiers_is_active` ON `membership_tiers` (`isActive`);
CREATE INDEX `membership_tiers_price_range_min_price_range_max` ON `membership_tiers` (`priceRangeMin`, `priceRangeMax`);
CREATE INDEX `users_email` ON `users` (`email`);
CREATE INDEX `users_username` ON `users` (`username`);
CREATE INDEX `users_membership_tier_id` ON `users` (`membershipTierId`);
CREATE INDEX `users_role` ON `users` (`role`);
CREATE INDEX `works_author` ON `Works` (`author`);
CREATE INDEX `works_category` ON `Works` (`category`);
CREATE INDEX `works_bootcamp` ON `Works` (`bootcamp`);
CREATE INDEX `works_is_pinned_votes` ON `Works` (`isPinned`, `votes`);
CREATE INDEX `works_visibility` ON `Works` (`visibility`);
CREATE INDEX `works_created_at` ON `Works` (`createdAt`);
CREATE INDEX `bootcamps_name` ON `bootcamps` (`name`);
CREATE INDEX `bootcamps_is_active` ON `bootcamps` (`isActive`);
CREATE INDEX `bootcamps_start_date_end_date` ON `bootcamps` (`startDate`, `endDate`);
CREATE INDEX `coupons_code` ON `coupons` (`code`);
CREATE INDEX `coupons_is_active` ON `coupons` (`isActive`);
CREATE INDEX `coupons_valid_from_valid_to` ON `coupons` (`validFrom`, `validTo`);
CREATE INDEX `coupons_created_by_id` ON `coupons` (`createdById`);
CREATE INDEX `serial_codes_code` ON `serial_codes` (`code`);
CREATE INDEX `serial_codes_is_used` ON `serial_codes` (`isUsed`);
CREATE INDEX `serial_codes_membership_tier_id` ON `serial_codes` (`membershipTierId`);
CREATE INDEX `serial_codes_batch_id` ON `serial_codes` (`batchId`);
CREATE INDEX `serial_codes_created_by_id` ON `serial_codes` (`createdById`);
CREATE INDEX `operation_logs_user_id` ON `operation_logs` (`userId`);
CREATE INDEX `operation_logs_operator_id` ON `operation_logs` (`operatorId`);
CREATE INDEX `operation_logs_operation_type` ON `operation_logs` (`operationType`);
CREATE INDEX `operation_logs_target_user_id` ON `operation_logs` (`targetUserId`);
CREATE INDEX `operation_logs_created_at` ON `operation_logs` (`createdAt`);
CREATE INDEX `membership_upgrades_user_id` ON `membership_upgrades` (`userId`);
CREATE INDEX `membership_upgrades_upgrade_type` ON `membership_upgrades` (`upgradeType`);
CREATE INDEX `membership_upgrades_operator_id` ON `membership_upgrades` (`operatorId`);
CREATE INDEX `membership_upgrades_serial_code_id` ON `membership_upgrades` (`serialCodeId`);
CREATE INDEX `membership_upgrades_created_at` ON `membership_upgrades` (`createdAt`);
CREATE UNIQUE INDEX `votes_user_id_work_id` ON `votes` (`userId`, `workId`);
CREATE UNIQUE INDEX `works_slug` ON `Works` (`slug`);
COMMIT;
